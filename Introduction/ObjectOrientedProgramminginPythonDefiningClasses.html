<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Объектно-ориентированное программирование в Python: определение классов &mdash; Problem Solving with Algorithms and Data Structures</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/video.css" type="text/css" />
    <link rel="stylesheet" href="../_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/js/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/js/pytutor.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/assess.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/underscore-min.js"></script>
    <script type="text/javascript" src="../_static/lib/lis.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/parsons-noconflict.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <link rel="top" title="Problem Solving with Algorithms and Data Structures" href="../index.html" />
    <link rel="next" title="Заключение" href="Summary.html" />
    <link rel="prev" title="Определение функций" href="DefiningFunctions.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'pythonds';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false
  eBookConfig.build_info = "2.1.5";
  eBookConfig.isLoggedIn = false;
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>


<script>
var _prum = [['id', '521dfcc4abe53d0749000000'],
             ['mark', 'firstbyte', (new Date()).getTime()]];
(function() {
    var s = document.getElementsByTagName('script')[0]
      , p = document.createElement('script');
    p.async = 'async';
    p.src = '//rum-static.pingdom.net/prum.min.js';
    s.parentNode.insertBefore(p, s);
})();
</script>



  </head>
  <body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="../index.html">Problem Solving with Algorithms and Data Structures</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div class="gittip">
                  <iframe style="border:0;"
                    src="https://www.gittip.com/bnmnetp/widget.html"
                    width="48pt" height="22pt" class="gittip-button">
                  </iframe>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHNwYJKoZIhvcNAQcEoIIHKDCCByQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYAcrkqh1hn3lYqIpfXxNqe1T82EhXzCJGy1yMAmklpyZshyMkfDGe1Bhx+iwyGeoYRTTyphFmP+9M3NyO0+Q5XdHxgZPx/zYjjBxlZHgEV6jhE8bN2fHkkPf0VHfz0a0QQylQOPlKiOTZV7B37Jpk6yM47oVZ1tG/KNm0NkfmB76DELMAkGBSsOAwIaBQAwgbQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIi0GmFfOlcjuAgZBbYOo9UO+CpMQa+PYqwsUmUnJvXIImeMeNI3KVTUx5Cfk9gNMo3WzPeiB5IqZo9nRAQ0mf1qL2ecLeB5tidM+lgBUhOxfj3/FecpnVFa0263gp4g+PLw8jzhvVRdUon1K3SeO1Rzh23fIRKwnrD6btt73uwtj0sl3tGd8qz+6GIcwPDdRk9VcUffiBJT/ZagKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xMzExMDMxMzQxMzFaMCMGCSqGSIb3DQEJBDEWBBRDJF8w+zsMr7FSk+pwinB5f5D4rzANBgkqhkiG9w0BAQEFAASBgHw1LMHpkpaqHIvDGdFE0eG+2mZlmMnUeDCBhQlbc7QMzFQYKTV94NfaebBO4PmNdADe1rq4WidSRZZbE7CzkX9IGENYnBTWY0hb2l0lGdGrJdGeWyV3ekg9WVaFMMumrekds96h3Cx7dGz2kWDzIai2iEXE/qoE+xpkyXAYZNV3-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/pythonds/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='http://127.0.0.1:8000/runestone/admin/index'>Instructor's Page</a></li>
            <li class="divider"></li>
            <li><a href="http://127.0.0.1:8000/runestone/default/user/profile" id="profilelink">Edit Profile</a></li>
            <li><a href="http://127.0.0.1:8000/runestone/default/user/change_password" id="passwordlink">Change Password</a></li>
            <li><a href="http://127.0.0.1:8000/runestone/default/user/register" id="registerlink">Register</a></li>
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
          </ul>
        </li>
        <!-- end user account dropdown -->

        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/pythonds/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='https://github.com/bnmnetp/runestone/issues/new'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Объектно-ориентированное программирование в Python: определение классов</a><ul>
<li><a class="reference internal" href="#fraction">Класс <tt class="docutils literal"><span class="pre">Fraction</span></tt></a></li>
<li><a class="reference internal" href="#id1">Наследование: логические вентили и схемы</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - Определение функций" data-toggle="tooltip">
    <a href="DefiningFunctions.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - Заключение' data-toggle="tooltip" >
    <a href="Summary.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="python">
<h1>Объектно-ориентированное программирование в Python: определение классов<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h1>
<p>Мы уже говорили ранее, что Python является объектно-ориентированным
языком. До сих пор мы использовали только несколько встроенных классов
для демонстрации данных и управляющих структур. Одной из наиболее мощных
черт объектно-ориентированного языка программирования является его
способность предоставить программисту (решателю задачи) возможность
создавать новые классы, моделирующие данные, необходимые для решения
проблемы.</p>
<p>Не забывайте: мы используем абстрактные типы данных, чтобы предоставить
логическое описание того, как выглядят объекты данных (их состояние) и
что они могут делать (их методы). Создавая класс, реализующий абстрактный
тип данных, программист пользуется преимуществами абстракции процесса и в
то же время предоставляет детали, необходимые при конкретном использовании
абстракции в программе. Всякий раз, когда мы хотим реализовать абстрактный
тип данных, мы делаем это через новый класс.</p>
<div class="section" id="fraction">
<h2>Класс <tt class="docutils literal"><span class="pre">Fraction</span></tt><a class="headerlink" href="#fraction" title="Permalink to this headline">¶</a></h2>
<p>Очень распространённым примером для демонстрации деталей реализации
пользовательского класса является разработка класса, реализующего
абстрактный тип данных <tt class="docutils literal"><span class="pre">Fraction</span></tt>. Мы уже видели, что Python
предоставляет в наше пользование несколько числовых классов. Однако,
бывают моменты, когда более подходящим является создание объекта
данных лишь &#8220;выглядящего как&#8221; дробь.</p>
<p>Дробь (например, <span class="math">\(\frac {3}{5}\)</span>) состоит из двух частей. Верхнее
значение, называемое числитель, может быть любым целым числом. Нижнее
значение (знаменатель) - любым целым, большим нуля (отрицательные дроби
имеют отрицательный числитель). Также для любой дроби можно создать
приближение с плавающей запятой. В этом случае мы хотели бы представлять
дробь как точное значение.</p>
<p>Операции для типа <tt class="docutils literal"><span class="pre">Fraction</span></tt> будут позволять объектам данных
<tt class="docutils literal"><span class="pre">Fraction</span></tt> вести себя подобно любым другим числовым значениям. Мы
должны быть готовы складывать, вычитать, умножать и делить дроби. Мы
также хотим иметь возможность показывать дроби в их стандартной
&#8220;слэш&#8221;-форме (например, <span class="math">\(\frac {3}{5}\)</span>). Так же все методы дробей
должны возвращать результат в своей сокращённой форме таким образом,
чтобы вне зависимости от вида вычислений мы в конце всегда имели бы
наиболее общепринятую форму.</p>
<p>В Python мы определяем новый класс предоставлением его имени и набора
определений методов, которые синтаксически подобны определениям функций.
В этом примере</p>
<div class="highlight-python"><div class="highlight"><pre>class Fraction:

   #the methods go here
</pre></div>
</div>
<p>нам дан каркас для определения методов. Первым методом, который должны
предоставлять все классы, является конструктор. Он определяет способ
создания объекта данных. Чтобы создать объект <tt class="docutils literal"><span class="pre">Fraction</span></tt>, нам нужно
предоставить два кусочка данных - числитель и знаменатель. В Python
метод конструктора всегда называется <tt class="docutils literal"><span class="pre">__init__</span></tt> (по два подчёркивания
до и после <tt class="docutils literal"><span class="pre">init</span></tt>). Он демонстрируется в <a class="reference internal" href="#lst-pyconstructor"><em>Листинге 2</em></a>:</p>
<p id="lst-pyconstructor"><strong>Listing 2</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Fraction</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">top</span><span class="p">,</span><span class="n">bottom</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">top</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">=</span> <span class="n">bottom</span>
</pre></div>
</div>
<p>Обратите внимание, что список формальных параметров содержит три элемента
(<tt class="docutils literal"><span class="pre">self</span></tt>, <tt class="docutils literal"><span class="pre">top</span></tt>, <tt class="docutils literal"><span class="pre">bottom</span></tt>). <tt class="docutils literal"><span class="pre">self</span></tt> - это специальный параметр,
который всегда используется как обратная ссылка на сам объект. Он всегда
должен быть первым формальным параметром, однако, при вызове конструктора
в него никогда не передаётся актуальное значение. Как уже было описано ранее,
дробям необходимы две части данных состояния - числитель и знаменатель.
Нотация <tt class="docutils literal"><span class="pre">self.num</span></tt> конструктора определяет, что объект <tt class="docutils literal"><span class="pre">fraction</span></tt> имеет
внутренний объект данных, именуемый <tt class="docutils literal"><span class="pre">num</span></tt>, как часть своего состояния.
Аналогично, <tt class="docutils literal"><span class="pre">self.den</span></tt> создаёт знаменатель. Значения этих двух формальных
параметров изначально устанавливаются в состояние, позволяющее новому объекту
<tt class="docutils literal"><span class="pre">fraction</span></tt> знать своё начальное значение.</p>
<p>Чтобы создать сущность класса <tt class="docutils literal"><span class="pre">Fraction</span></tt>, мы должны вызвать конструктор.
Это произойдёт при использовании имени класса с подстановкой актуальных
значений в необходимое состояние (заметьте, что мы никогда не вызываем
непосредственно <tt class="docutils literal"><span class="pre">__init__</span></tt>). Например,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">myfraction</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>создаст объект с именем <tt class="docutils literal"><span class="pre">myfraction</span></tt>, представляющий дробь <span class="math">\(\frac {3}{5}\)</span>
(три пятых). <a class="reference internal" href="#fig-fraction1"><em>Рисунок 5</em></a> показывает этот объект, как уже
существующий.</p>
<div class="figure align-center" id="fig-fraction1">
<img alt="../_images/fraction1.png" src="../_images/fraction1.png" />
<p class="caption">Рисунок 5: Экземпляр класса <tt class="docutils literal"><span class="pre">Fraction</span></tt></p>
</div>
<p>Следующее, чем мы займёмся, это реализация поведения, требуемого абстрактным
классом. Для начала рассмотрим, что происходит, когда мы пытаемся напечатать
объект <tt class="docutils literal"><span class="pre">Fraction</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">myf</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">myf</span><span class="p">)</span>
<span class="go">&lt;__main__.Fraction instance at 0x409b1acc&gt;</span>
</pre></div>
</div>
<p>Объект <tt class="docutils literal"><span class="pre">fraction</span></tt>, <tt class="docutils literal"><span class="pre">myf</span></tt> не знает, как ему отвечать на запрос о печати.
Функция <tt class="docutils literal"><span class="pre">print</span></tt> требует, чтобы объект конвертировал себя самоё в строку,
которая будет записана на выходе. Единственный выбор, который имеет
<tt class="docutils literal"><span class="pre">myf</span></tt>, - это показать актуальную ссылку, хранящуюся в переменной
(непосредственный адрес). Это не то, чего мы хотим.</p>
<p>Существует два пути решения этой проблемы. Первый - определить метод под
названием <tt class="docutils literal"><span class="pre">show</span></tt>, который позволит объекту <tt class="docutils literal"><span class="pre">Fraction</span></tt> печать самоё себя
как строку. Мы можем реализовать этот метод, как показано в
<a class="reference internal" href="#lst-showmethod"><em>Листинге 3</em></a>. Если мы будем создавать объект
<tt class="docutils literal"><span class="pre">Fraction</span></tt> как и раньше, то мы сможем попросить его показать себя - другими
словами, напечатать себя в подходящем формате. К сожалению, в общем случае это
не будет работать. Для того, чтобы организовать печать должным образом, нам
необходимо сообщить классу <tt class="docutils literal"><span class="pre">Fraction</span></tt>, как ему конвертировать себя в строку.
Это то, что необходимо функции <tt class="docutils literal"><span class="pre">print</span></tt> для нормальной работы.</p>
<p id="lst-showmethod"><strong>Листинг 3</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">,</span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">den</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">myf</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myf</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">3 / 5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">myf</span><span class="p">)</span>
<span class="go">&lt;__main__.Fraction instance at 0x40bce9ac&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>В Python у всех классов имеется набор стандартных методов, которые
предоставляются по умолчанию, но могут не работать должным образом. Один из
них, <tt class="docutils literal"><span class="pre">__str__</span></tt>, - это метод преобразования объекта в строку. Реализация по
умолчанию для этого метода, как мы уже могли видеть, возвращает строку адреса
экземпляра класса. Что нам необходимо сделать, так это предоставить &#8220;лучшую&#8221;
реализацию для него. Мы будем говорить, что эта реализация <strong>перегружает</strong>
предыдущую (или переопределяет поведение метода).</p>
<p>Чтобы сделать это, мы просто определим метод с именем <tt class="docutils literal"><span class="pre">__str__</span></tt> и зададим для
него новую реализацию, как показано в <a class="reference internal" href="#lst-str"><em>Листинге 4</em></a>. Это определение
не нуждается ни в какой дополнительной информации, кроме специального параметра
<tt class="docutils literal"><span class="pre">self</span></tt>. В свою очередь, метод будет создавать строковое представление конвертированием
каждого кусочка внутренних данных состояния в строку и конкатенацией этих строк с
помощью символа <tt class="docutils literal"><span class="pre">/</span></tt> между ними. Результирующая строка будет возвращаться всякий
раз, как объект <tt class="docutils literal"><span class="pre">Fraction</span></tt> попросит преобразовать себя в строку. Обратите внимание
на различные способы использования этой функции.</p>
<p id="lst-str"><strong>Листинг 4</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;/&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">den</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">myf</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">myf</span><span class="p">)</span>
<span class="go">3/5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;I ate&quot;</span><span class="p">,</span> <span class="n">myf</span><span class="p">,</span> <span class="s">&quot;of the pizza&quot;</span><span class="p">)</span>
<span class="go">I ate 3/5 of the pizza</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myf</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span>
<span class="go">&#39;3/5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">myf</span><span class="p">)</span>
<span class="go">&#39;3/5&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Мы можем перегрузить множество других методов для нашего нового класса
<tt class="docutils literal"><span class="pre">Fraction</span></tt>. Одними из наиболее важных из них являются основные
арифметические операции. Мы хотели бы иметь возможность создать два объекта
<tt class="docutils literal"><span class="pre">Fraction</span></tt>, а затем сложить их вместе, используя стандартную запись &#8220;+&#8221;.
На данный момент, складывая две дроби, мы получаем следующее:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="o">+</span><span class="n">f2</span>

<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;pyshell#173&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">-toplevel-</span>
    <span class="n">f1</span><span class="o">+</span><span class="n">f2</span>
<span class="gr">TypeError</span>: <span class="n">unsupported operand type(s) for +:</span>
<span class="go">          &#39;instance&#39; and &#39;instance&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Если вы внимательнее посмотрите на сообщение об ошибке, то заметите,
что загвоздка в том, что оператор &#8220;+&#8221; не понимает операндов <tt class="docutils literal"><span class="pre">Fraction</span></tt>.</p>
<p>Мы можем исправить это, предоставив классу <tt class="docutils literal"><span class="pre">Fraction</span></tt> метод, перегружающий
сложение. В Python такой метод называется <tt class="docutils literal"><span class="pre">__add__</span></tt> и принимает два параметра.
Первый <tt class="docutils literal"><span class="pre">self</span></tt> необходим всегда, второй представляет из себя второй операнд
выражения. Например,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f1</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span>
</pre></div>
</div>
<p>будет запрашивать у <tt class="docutils literal"><span class="pre">Fraсtion</span></tt> объект <tt class="docutils literal"><span class="pre">f1</span></tt> прибавить к <tt class="docutils literal"><span class="pre">Fraction</span></tt> объект
<tt class="docutils literal"><span class="pre">f2</span></tt>. Это может быть записано и в стандартной нотации <tt class="docutils literal"><span class="pre">f1</span> <span class="pre">+</span> <span class="pre">f2</span></tt>.</p>
<p>Для того, чтобы сложить две дроби, их нужно привести к общему знаменателю.
Простейший способ увериться, что у них одинаковый знаменатель, - это использовать
в его качестве произведение знаменателей дробей. Т.е.
<span class="math">\(\frac {a}{b} + \frac {c}{d} = \frac {ad}{bd} + \frac {cb}{bd} = \frac{ad+cb}{bd}\)</span>
Реализация показана в <a class="reference internal" href="#lst-addmethod"><em>Листинге 5</em></a>. Функция сложения
возвращает новый объект <tt class="docutils literal"><span class="pre">Fraction</span></tt> с числителем и знаменателем суммарной дроби.
Мы можем использовать этот метод при написании стандартных арифметических выражений
с дробями, присваивая результату суммарную дробь и выводя её на экран.</p>
<p id="lst-addmethod"><strong>Листинг 5</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">otherfraction</span><span class="p">):</span>

     <span class="n">newnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="o">*</span><span class="n">otherfraction</span><span class="o">.</span><span class="n">den</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span><span class="o">*</span><span class="n">otherfraction</span><span class="o">.</span><span class="n">num</span>
     <span class="n">newden</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">otherfraction</span><span class="o">.</span><span class="n">den</span>

     <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">newnum</span><span class="p">,</span><span class="n">newden</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span><span class="o">=</span><span class="n">f1</span><span class="o">+</span><span class="n">f2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span>
<span class="go">6/8</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Метод сложения работает, как мы того и хотели, но одну вещь можно было
бы улучшить. Заметьте, что <tt class="docutils literal"><span class="pre">6/8</span></tt> - это правильный результат вычисления
<tt class="docutils literal"><span class="pre">(1/4</span> <span class="pre">+</span> <span class="pre">1/2)</span></tt>, но это не сокращённая форма. Лучшим представлением будет
<tt class="docutils literal"><span class="pre">3/4</span></tt>. Для того, чтобы быть уверенными, что наш результат всегда имеет
сокращённый вид, нам понадобится вспомогательная функция, умеющая сокращать
дроби. В ней нужно будет находить наибольший общий делитель, или НОД. Затем
мы сможем разделить числитель и знаменатель на НОД, а результат и будет
сокращением до наименьших членов.</p>
<p>Наиболее известный алгоритм нахождения наибольшего общего делителя - это
алгоритм Евклида, который будет детально обсуждаться в главе 8. Он
устанавливает, что наибольшим общим делителем двух чисел <tt class="docutils literal"><span class="pre">m</span></tt> и <tt class="docutils literal"><span class="pre">n</span></tt>
будет <tt class="docutils literal"><span class="pre">n</span></tt>, если <tt class="docutils literal"><span class="pre">m</span></tt> делится на <tt class="docutils literal"><span class="pre">n</span></tt> нацело. Однако, если этого не
происходит, то ответом будет НОД <tt class="docutils literal"><span class="pre">n</span></tt> и остатка деления <tt class="docutils literal"><span class="pre">m</span></tt> на <tt class="docutils literal"><span class="pre">n</span></tt>.
Мы просто предоставим здесь итеративную реализацию этого алгоритма
(см <a class="reference internal" href="#lst-gcd"><em>ActiveCode 11</em></a>). Обратите внимание, что она работает
только при положительном знаменателе. Это допустимо для нашего класса дробей,
поскольку мы говорили, что отрицательные дроби будут представляться
отрицательным числителем.</p>

<div id="cont"></div>
<div id="gcd_cl" lang="python" class="ac_section alert alert-warning" >

<div class="ac_actions">
<button class='btn btn-success' id="gcd_cl_runb">Run</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="gcd_cl_saveb" onclick="saveEditor('gcd_cl');">Save</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="gcd_cl_loadb" onclick="requestCode('gcd_cl');">Load</button>

</div>
<br/>
<div id="gcd_cl_code_div" style="display: block" class="ac_code_div">
<textarea cols="50" rows="12" id="gcd_cl_code" class="active_code", prefixcode="undefined" lang="python">
def gcd(m,n):
    while m%n != 0:
        oldm = m
        oldn = n

        m = oldn
        n = oldm%oldn
    return n

print gcd(20,10)
</textarea>
</div>
<div class="ac_output">
<div style="text-align: center">
<canvas id="gcd_cl_canvas" class="ac-canvas" height="400" width="400" style="border-style: solid; display: none; text-align: center"></canvas>
</div>
<pre id="gcd_cl_suffix" style="display:none">
</pre><pre id="gcd_cl_pre" class="active_out">

</pre>

</div> 
<div class="clearfix"></div>
<p class="ac_caption"><span class="ac_caption_text">Функция поиска наибольшего общего делителя (gcd_cl)</span> </p>

<script>
if ('block' == 'none') {
    // a hack to preserve the inline-block display style. Toggle() will use display: block
    // (instead of inline-block) if the previous display style was 'none'
    $('#gcd_cl_saveb').toggle();
    $('#gcd_cl_loadb').toggle();
}
if ($("#gcd_cl_code_div").parents(".admonition").length == 0 && $("#gcd_cl_code_div").parents("#exercises").length == 0){
	if ($(window).width() > 975){
		$("#gcd_cl_code_div").offset({
			left: $("#gcd_cl .clearfix").offset().left
		});
	}
	$("#gcd_cl_runb").one("click", function(){
		$({})
		.queue(function (next) {
			if ($(window).width() > 975){
				$("#gcd_cl_code_div").animate({
					left: 40
				}, 500, next);
			}
			else{
				next();
			}
		})
		.queue(function (next) {
			$("#gcd_cl_runb").parent().siblings(".ac_output").show();
			runit('gcd_cl',this, undefined);
			$("#gcd_cl_runb").on("click", function(){
				runit('gcd_cl',this, undefined);
			});
		})
		
	});
}
else{
	console.log("inside new if")
	$("#gcd_cl_code_div").css({float : "none", marginLeft : "auto", marginRight : "auto"});
	$("#gcd_cl_runb").parent().siblings(".ac_output").show().css({float : "none", right : "0px"});
	$("#gcd_cl_runb").on("click", function(){
		console.log("button clicked");
		runit('gcd_cl',this, undefined);
	});
}
</script>

</div>

<p>Теперь мы можем использовать эту функцию для сокращения любой дроби.
Чтобы представить дробь в сокращённом виде, мы будем делить числитель
и знаменатель на их наибольший общий делитель. Итак, для дроби <span class="math">\(6/8\)</span>
НОД будет равен 2. Разделив верх и низ на 2, мы получим новую дробь <span class="math">\(3/4\)</span>
(см <a class="reference internal" href="#lst-newaddmethod"><em>Листинг 6</em></a>).</p>
<p id="lst-newaddmethod"><strong>Листинг 6</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">otherfraction</span><span class="p">):</span>
    <span class="n">newnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="o">*</span><span class="n">otherfraction</span><span class="o">.</span><span class="n">den</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span><span class="o">*</span><span class="n">otherfraction</span><span class="o">.</span><span class="n">num</span>
    <span class="n">newden</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">otherfraction</span><span class="o">.</span><span class="n">den</span>
    <span class="n">common</span> <span class="o">=</span> <span class="n">gcd</span><span class="p">(</span><span class="n">newnum</span><span class="p">,</span><span class="n">newden</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">newnum</span><span class="o">//</span><span class="n">common</span><span class="p">,</span><span class="n">newden</span><span class="o">//</span><span class="n">common</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span><span class="o">=</span><span class="n">f1</span><span class="o">+</span><span class="n">f2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span>
<span class="go">3/4</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="figure align-center" id="fig-fraction2">
<img alt="../_images/fraction2.png" src="../_images/fraction2.png" />
<p class="caption">Рисунок 6: Экземпляр класса <tt class="docutils literal"><span class="pre">Fraction</span></tt> с двумя методами</p>
</div>
<p>Сейчас наш объект Fraction имеет два очень полезных метода и выглядит,
как показано на <a class="reference internal" href="#fig-fraction2"><em>Рисунке 6</em></a>. Группа дополнительных
методов, которые нам понадобится включить в класс <tt class="docutils literal"><span class="pre">Fraction</span></tt>, содержит
способ сравнивать две дроби. Предположим, что у нас есть два объекта
<tt class="docutils literal"><span class="pre">Fraction</span> <span class="pre">f1</span></tt> и <tt class="docutils literal"><span class="pre">f2</span></tt>. <tt class="docutils literal"><span class="pre">f1</span> <span class="pre">==</span> <span class="pre">f2</span></tt> будет истиной, если они ссылаются
на один и тот же объект. Два разных объекта с одинаковыми числителями и
знаменателями в этой реализации равны не будут. Это называется
<strong>поверхностным равенством</strong> (см. <a class="reference internal" href="#fig-fraction3"><em>Рисунок 7</em></a>)</p>
<div class="figure align-center" id="fig-fraction3">
<img alt="../_images/fraction3.png" src="../_images/fraction3.png" />
<p class="caption">Рисунок 7: Поверхностное равенство vs глубокое равенство</p>
</div>
<p>Мы можем создать <strong>глубокое равенство</strong> (см. <a class="reference internal" href="#fig-fraction3"><em>Рисунок 7</em></a>) -
по одинаковому значению, а не по одинаковой ссылке - перегрузив метод <tt class="docutils literal"><span class="pre">__eq__</span></tt>.
Это ещё один стандартный метод, доступный в любом классе. Он сравнивает два объекта
и возвращает <tt class="docutils literal"><span class="pre">True</span></tt>, если их значения равны, или <tt class="docutils literal"><span class="pre">False</span></tt> в противном случае.</p>
<p>В классе <tt class="docutils literal"><span class="pre">Fraction</span></tt> мы можем реализовать метод <tt class="docutils literal"><span class="pre">__eq__</span></tt>, вновь представив обе
дроби в виде с одинаковым знаменателем и затем сравнив их числители
(см. <a class="reference internal" href="#lst-cmpmethod"><em>Листинг 7</em></a>). Здесь также важно отметить другие операторы
отношений, которые могут быть перегружены. Например, метод <tt class="docutils literal"><span class="pre">__le__</span></tt> предоставляет
функционал &#8220;меньше или равно&#8221;.</p>
<p id="lst-cmpmethod"><strong>Листинг 7</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="n">firstnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">den</span>
    <span class="n">secondnum</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">num</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span>

    <span class="k">return</span> <span class="n">firstnum</span> <span class="o">==</span> <span class="n">secondnum</span>
</pre></div>
</div>
<p>Полностью класс <tt class="docutils literal"><span class="pre">Fraction</span></tt>, реализованный на данный момент, показан в
<a class="reference internal" href="#lst-fractioncode"><em>ActiveCode 12</em></a>. Мы оставляем читателям реализацию
оставшейся арифметики и методов отношений в качестве упражнений.</p>

<div id="cont"></div>
<div id="fraction_class" lang="python" class="ac_section alert alert-warning" >

<div class="ac_actions">
<button class='btn btn-success' id="fraction_class_runb">Run</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="fraction_class_saveb" onclick="saveEditor('fraction_class');">Save</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="fraction_class_loadb" onclick="requestCode('fraction_class');">Load</button>

</div>
<br/>
<div id="fraction_class_code_div" style="display: block" class="ac_code_div">
<textarea cols="50" rows="12" id="fraction_class_code" class="active_code", prefixcode="undefined" lang="python">
def gcd(m,n):
    while m%n != 0:
        oldm = m
        oldn = n

        m = oldn
        n = oldm%oldn
    return n

class Fraction:
     def __init__(self,top,bottom):
         self.num = top
         self.den = bottom

     def __str__(self):
         return str(self.num)+"/"+str(self.den)

     def show(self):
         print(self.num,"/",self.den)

     def __add__(self,otherfraction):
         newnum = self.num*otherfraction.den + \
                      self.den*otherfraction.num
         newden = self.den * otherfraction.den
         common = gcd(newnum,newden)
         return Fraction(newnum//common,newden//common)

     def __eq__(self, other):
         firstnum = self.num * other.den
         secondnum = other.num * self.den

         return firstnum == secondnum

x = Fraction(1,2)
y = Fraction(2,3)
print(x+y)
print(x == y)
</textarea>
</div>
<div class="ac_output">
<div style="text-align: center">
<canvas id="fraction_class_canvas" class="ac-canvas" height="400" width="400" style="border-style: solid; display: none; text-align: center"></canvas>
</div>
<pre id="fraction_class_suffix" style="display:none">
</pre><pre id="fraction_class_pre" class="active_out">

</pre>

</div> 
<div class="clearfix"></div>
<p class="ac_caption"><span class="ac_caption_text">The Fraction Class (fraction_class)</span> </p>

<script>
if ('block' == 'none') {
    // a hack to preserve the inline-block display style. Toggle() will use display: block
    // (instead of inline-block) if the previous display style was 'none'
    $('#fraction_class_saveb').toggle();
    $('#fraction_class_loadb').toggle();
}
if ($("#fraction_class_code_div").parents(".admonition").length == 0 && $("#fraction_class_code_div").parents("#exercises").length == 0){
	if ($(window).width() > 975){
		$("#fraction_class_code_div").offset({
			left: $("#fraction_class .clearfix").offset().left
		});
	}
	$("#fraction_class_runb").one("click", function(){
		$({})
		.queue(function (next) {
			if ($(window).width() > 975){
				$("#fraction_class_code_div").animate({
					left: 40
				}, 500, next);
			}
			else{
				next();
			}
		})
		.queue(function (next) {
			$("#fraction_class_runb").parent().siblings(".ac_output").show();
			runit('fraction_class',this, undefined);
			$("#fraction_class_runb").on("click", function(){
				runit('fraction_class',this, undefined);
			});
		})
		
	});
}
else{
	console.log("inside new if")
	$("#fraction_class_code_div").css({float : "none", marginLeft : "auto", marginRight : "auto"});
	$("#fraction_class_runb").parent().siblings(".ac_output").show().css({float : "none", right : "0px"});
	$("#fraction_class_runb").on("click", function(){
		console.log("button clicked");
		runit('fraction_class',this, undefined);
	});
}
</script>

</div>

<div class="admonition- admonition">
<p class="first admonition-title">Самопроверка</p>
<p>Чтобы убедиться, что вы понимаете, как в классах Python реализовываются операторы и как корректно писать методы, напишите реализацию операций <tt class="docutils literal"><span class="pre">*</span></tt>, <tt class="docutils literal"><span class="pre">/</span></tt> и <tt class="docutils literal"><span class="pre">-</span></tt>. Также реализуйте операторы сравнения &gt; и &lt;</p>

<div id="cont"></div>
<div id="self_check_4" lang="python" class="ac_section alert alert-warning" >

<div class="ac_actions">
<button class='btn btn-success' id="self_check_4_runb">Run</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="self_check_4_saveb" onclick="saveEditor('self_check_4');">Save</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="self_check_4_loadb" onclick="requestCode('self_check_4');">Load</button>

<span class="ac_sep"></span>
<button class='btn btn-default' id="self_check_4_showb" onclick="$('#self_check_4_code_div').toggle();cm_editors['self_check_4_code'].refresh();$('#self_check_4_saveb').toggle();$('#self_check_4_loadb').toggle()">Show/Hide Code</button>

<span class="ac_sep"></span>
<input type="button" class='btn btn-default ' id="gradeb" name="Show Feedback" value="Show Feedback" onclick="createGradeSummary('self_check_4')"/>

</div>
<br/>
<div id="self_check_4_code_div" style="display: none" class="ac_code_div">
<textarea cols="50" rows="12" id="self_check_4_code" class="active_code", prefixcode="undefined" lang="python">


</textarea>
</div>
<div class="ac_output">
<div style="text-align: center">
<canvas id="self_check_4_canvas" class="ac-canvas" height="400" width="400" style="border-style: solid; display: none; text-align: center"></canvas>
</div>
<pre id="self_check_4_suffix" style="display:none">
</pre><pre id="self_check_4_pre" class="active_out">

</pre>

</div> 
<div class="clearfix"></div>
<p class="ac_caption"><span class="ac_caption_text"> (self_check_4)</span> </p>

<script>
if ('none' == 'none') {
    // a hack to preserve the inline-block display style. Toggle() will use display: block
    // (instead of inline-block) if the previous display style was 'none'
    $('#self_check_4_saveb').toggle();
    $('#self_check_4_loadb').toggle();
}
if ($("#self_check_4_code_div").parents(".admonition").length == 0 && $("#self_check_4_code_div").parents("#exercises").length == 0){
	if ($(window).width() > 975){
		$("#self_check_4_code_div").offset({
			left: $("#self_check_4 .clearfix").offset().left
		});
	}
	$("#self_check_4_runb").one("click", function(){
		$({})
		.queue(function (next) {
			if ($(window).width() > 975){
				$("#self_check_4_code_div").animate({
					left: 40
				}, 500, next);
			}
			else{
				next();
			}
		})
		.queue(function (next) {
			$("#self_check_4_runb").parent().siblings(".ac_output").show();
			runit('self_check_4',this, undefined);
			$("#self_check_4_runb").on("click", function(){
				runit('self_check_4',this, undefined);
			});
		})
		
	});
}
else{
	console.log("inside new if")
	$("#self_check_4_code_div").css({float : "none", marginLeft : "auto", marginRight : "auto"});
	$("#self_check_4_runb").parent().siblings(".ac_output").show().css({float : "none", right : "0px"});
	$("#self_check_4_runb").on("click", function(){
		console.log("button clicked");
		runit('self_check_4',this, undefined);
	});
}
</script>

</div>

</div>
<div id="fraction" class="video_popup" >
<video controls preload="none"  poster="../_static/videothumb.png">
    <source src="http://media.interactivepython.org/pythondsVideos/fraction.mov" type="video/mp4"></source>
    <source src="http://media.interactivepython.org/pythondsVideos/fraction.webm" type="video/webm"></source>
    No supported video types
</video>
</div>
<script>
   jQuery(function($) {
      $('#fraction_thumb').click(function(e) {
         $('#fraction').show();
         $('#fraction_thumb').hide();
         logBookEvent({'event':'video','act':'play','div_id': 'fraction'});
         // Log the run event
      });
	  $('#fraction video').one("click", function(){
		this.play();
	  });
	  $('#fraction video').one("play", function(){
		logBookEvent({'event':'video','act':'play','div_id': 'fraction'});
	  });
   });
</script>
</div>
<div class="section" id="id1">
<h2>Наследование: логические вентили и схемы<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Наш финальный раздел будет посвящён другому важному аспекту
объектно-ориентированного программирования. <strong>Наследование</strong>
- это способность одного класса быть связанным с другим классом
подобно тому, как бывают связаны между собой люди. Дети наследуют
черты своих родителей. Аналогично, в Python класс-потомок наследует
характеристики данных и поведения от класса-предка. Такие классы
часто называют <strong>субклассами</strong> и <strong>суперклассами</strong>, соответственно.</p>
<p><a class="reference internal" href="#fig-inherit1"><em>Рисунок 8</em></a> показывает встроенные коллекции Python
и взаимоотношения между ними. Такого рода структуру отношений называют
<strong>иерархией наследования</strong>. Например, список является потомком коллекций
с последовательным доступом. В данном случае мы назовём список &#8220;наследником&#8221;,
а коллекцию - &#8220;родителем&#8221; (или список - субклассом, коллекцию - суперклассом).
Такая зависимость часто называется <tt class="docutils literal"><span class="pre">отношением</span> <span class="pre">IS-A</span></tt> (список является (is a)
коллекцией с последовательным доступом). Это подразумевает, что списки наследуют
важнейшие характеристики коллекций, в частности - упорядочение исходных данных,
и такие операции, как конкатенация, повторение и индексация.</p>
<div class="figure align-center" id="fig-inherit1">
<img alt="../_images/inheritance1.png" src="../_images/inheritance1.png" />
<p class="caption">Рисунок 8: Иерархия наследования для коллекций Python</p>
</div>
<p>И списки, и кортежи, и строки представляют из себя коллекции с последовательным
доступом, наследуя общую организацию данных и операции. Однако, они различны по
гомогенности данных и мутабельности наборов. Все потомки наследуют своим родителям,
но различаются между собой включением дополнительных характеристик.</p>
<p>Организовывая классы в иерархическом порядке, объектно-ориентированные языки
программирования позволяют расширять ранее написанный код под вновь возникающие
потребности. В дополнение, организовывая данные в иерархической манере, мы лучше
понимаем существующие между ними взаимоотношения. Мы можем создавать более эффективное
абстрактное представление.</p>
<p>Чтобы глубже исследовать эту идею, мы сделаем <strong>симуляцию</strong> - приложение, симулирующее
цифровые цепи. Её основными строительными блоками будут логические элементы. Эти электронные
переключатели представляют собой соотношения булевой алгебры между их входом и выходом. В
общем случае вентили имеют единственную линию выхода. Значение на ней зависит от значений,
подаваемых на входные линии.</p>
<p>Вентиль &#8220;И&#8221; (AND) имеет два входа, на каждый из которых может подаваться нуль или единица
(кодирование <tt class="docutils literal"><span class="pre">False</span></tt> или <tt class="docutils literal"><span class="pre">True</span></tt>, соответственно). Если на оба входа подана единица, то
значение на выходе тоже 1. Однако, если хотя бы один из входов установлен в нуль, то
результатом будет 0. Вентиль &#8220;ИЛИ&#8221; также имеет два входа и выдаёт единицу, если хотя бы на
одном из них 1. В случае, когда обе входные линии в нуле, результат тоже 0.</p>
<p>Вентиль &#8220;НЕ&#8221; (NOT) отличается от предыдущих тем, что имеет всего один вход. Значение на
выходе будет просто обратным входному значению. Т.е., если на входе 0, то на выходе 1, и
наоборот. <a class="reference internal" href="#fig-truthtable"><em>Рисунок 9</em></a> показывает, как обычно представляют каждый из
этих вентилей. Так же каждый из них имеет свою <strong>таблицу истинности</strong> значений, отражающую
отображение вентилем входа на выход.</p>
<div class="figure align-center" id="fig-truthtable">
<img alt="../_images/truthtable.png" src="../_images/truthtable.png" />
<p class="caption">Рисунок 9: Три типа логических элементов</p>
</div>
<p>Комбинируя эти вентили в различные структуры и применяя к получившемуся наборы
входных комбинаций, мы можем строить цепи, обладающие различными логическими
функциями. <a class="reference internal" href="#fig-circuit1"><em>Рисунок 10</em></a> демонстрирует цепь, состоящую из
двух вентилей &#8220;И&#8221;, одного вентиля &#8220;ИЛИ&#8221; и одного вентиля &#8220;НЕ&#8221;. Выходы элементов
&#8220;И&#8221; подключены непосредственно к входам элемента &#8220;ИЛИ&#8221;, а его результирующий
вывод - ко входу вентиля &#8220;НЕ&#8221;. Если мы будем подавать набор входных значений
на четыре входные линии (по две на каждый элемент &#8220;И&#8221;), то они будут обработаны,
и результат появится на выходе вентиля &#8220;НЕ&#8221;. <a class="reference internal" href="#fig-circuit1"><em>Рисунок 10</em></a>
так же демонстрирует пример со значениями.</p>
<div class="figure align-center" id="fig-circuit1">
<img alt="../_images/circuit1.png" src="../_images/circuit1.png" />
<p class="caption">Рисунок 10: Цепь</p>
</div>
<p>Задавшись целью воплотить эту цепь, мы прежде всего должны создать
представление для логических вентилей. Их легко организовать, как класс
с наследственной иерархией, показанной на <a class="reference internal" href="#fig-gates"><em>Рисунке 11</em></a>.
Верхний класс <tt class="docutils literal"><span class="pre">LogicGate</span></tt> представляет наиболее общие характеристики
логических элементов: в частности, метку вентиля и линию выхода. Следующий
уровень субклассов разбивает логические элементы на два семейства: имеющие
один вход и имеющие два входа. Ниже уже появляются конкретные логические
функции для каждого вентиля.</p>
<div class="figure align-center" id="fig-gates">
<img alt="../_images/gates.png" src="../_images/gates.png" />
<p class="caption">Рисунок 11: Иерархия наследования для логических элементов</p>
</div>
<p>Теперь мы можем заняться реализацией классов, начиная с наиболее общего
- <tt class="docutils literal"><span class="pre">LogicGate</span></tt>. Как уже отмечалось ранее, каждый вентиль имеет метку для
идентификации и единственную линию выхода. В дополнение, нам потребуются
методы, позволяющие пользователю запрашивать у вентиля его метку.</p>
<p>Следующим аспектом поведения, в котором нуждается любой вентиль, является
необходимость знать его выходное значение. Это требуется для выполнения
вентилями соответствующих алгоритмов, основанных на текущих значениях на
входах. Для генерации выходного значения логическим элементам необходимо
конкретное знание логики их работы. Это подразумевает вызов метода,
совершающего логические вычисления. Полностью класс показан
в <a class="reference internal" href="#lst-logicgateclass"><em>Листинге 8</em></a></p>
<p id="lst-logicgateclass"><strong>Листинг 8</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">LogicGate</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">getLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span>

    <span class="k">def</span> <span class="nf">getOutput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">performGateLogic</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span>
</pre></div>
</div>
<p>На данный момент мы не будем реализовывать функцию <tt class="docutils literal"><span class="pre">performGateLogic</span></tt>.
Причина в том, что мы не знаем, как будут работать логические операции у
каждого вентиля. Эти детали мы включим для каждого добавленного в иерархию
элемента индивидуально. Это очень мощная идея объектно-ориентированного
программирования: мы пишем метод, который будет использовать ещё не
существующий код. Параметр <tt class="docutils literal"><span class="pre">self</span></tt> является ссылкой на актуальный
вентиль, вызывающий метод. Любые вновь добавленные в иерархию логические
элементы просто будут нуждаться в собственной реализации функции
<tt class="docutils literal"><span class="pre">performGateLogic</span></tt>, которая будет использована в нужный момент. После
этого вентили будут предоставлять своё выходное значение. Эта возможность
расширять существующую иерархию и обеспечивать необходимые для её нового
класса функции чрезвычайно важна для повторного использования существующего кода.</p>
<p>Мы разделили логические элементы, основываясь на количестве их входных линий.
У вентиля &#8220;И&#8221; их две, вентиля &#8220;ИЛИ&#8221; тоже две, а у вентиля &#8220;НЕ&#8221; - одна. Класс
<tt class="docutils literal"><span class="pre">BinaryGate</span></tt> будет субклассом <tt class="docutils literal"><span class="pre">LogicGate</span></tt> и включит в себя элементы с двумя
входными линиями. Класс <tt class="docutils literal"><span class="pre">UnaryGate</span></tt> также будет субклассом <tt class="docutils literal"><span class="pre">LogicGate</span></tt>, но
входная линия у его элементов будет одна. В конструировании компьютерных цепей
такие линии иногда называют &#8220;пинами&#8221;, так что мы будем использовать эту
терминологию и в нашей реализации.</p>
<p id="lst-binarygateclass"><strong>Листинг 9</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BinaryGate</span><span class="p">(</span><span class="n">LogicGate</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="n">LogicGate</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pinA</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pinB</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">getPinA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;Enter Pin A input for gate &quot;</span><span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLabel</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;--&gt;&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">getPinB</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;Enter Pin B input for gate &quot;</span><span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLabel</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;--&gt;&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p id="lst-unarygateclass"><strong>Листинг 10</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UnaryGate</span><span class="p">(</span><span class="n">LogicGate</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="n">LogicGate</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pin</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">getPin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;Enter Pin input for gate &quot;</span><span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLabel</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;--&gt;&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p><a class="reference internal" href="#lst-logicgateclass"><em>Листинг 9</em></a> и <a class="reference internal" href="#lst-logicgateclass"><em>Листинг 10</em></a>
реализуют эти два класса. Конструкторы их обоих начинаются с явного вызова
конструктора родительского класса с использованием функции <tt class="docutils literal"><span class="pre">super</span></tt>. Когда
мы создаём экземпляр класса <tt class="docutils literal"><span class="pre">BinaryGate</span></tt>, мы прежде всего хотим
инициализировать любые элементы данных, которые наследуются от <tt class="docutils literal"><span class="pre">LogicGate</span></tt>.
В данном случае это метка вентиля. Затем конструктор добавляет два входа
(<tt class="docutils literal"><span class="pre">pinA</span></tt> и <tt class="docutils literal"><span class="pre">pinB</span></tt>). Это очень распространённая схема, которую вам следует
использовать при проектировании иерархии классов. Конструктору дочернего класса
сначала нужно вызвать конструктор родительского класса, и только потом
переключаться на собственные, отличные от предка, данные.</p>
<p>Единственным, что добавится к поведению класса <tt class="docutils literal"><span class="pre">BinaryGate</span></tt> будет возможность
получать значения от двух входных линий. Поскольку эти значения берутся откуда-то
извне, то с помощью оператора ввода мы можем просто попросить пользователя
предоставить их. То же самое происходит в реализации класса <tt class="docutils literal"><span class="pre">UnaryGate</span></tt>, за
исключением того момента, что он имеет всего один вход.</p>
<p>Теперь, когда у нас есть общие классы для вентилей, зависящие от количества их
входов, мы можем создавать специфические вентили с уникальным поведением.
Например, класс <tt class="docutils literal"><span class="pre">AndGate</span></tt>, который будет подклассом <tt class="docutils literal"><span class="pre">BinaryGate</span></tt>, поскольку
элемент &#8220;И&#8221; имеет два входа. Как и раньше, первая строка конструктора вызывает
конструктор базового класса (<tt class="docutils literal"><span class="pre">BinaryGate</span></tt>), который, в свою очередь, вызывает
конструктор своего родителя (<tt class="docutils literal"><span class="pre">LogicGate</span></tt>). Обратите внимание, что класс
<tt class="docutils literal"><span class="pre">AndGate</span></tt> не предоставляет каких-либо новых дополнительных данных, поскольку
наследует две входные линии, одну выходную и метку.</p>
<p id="lst-andgateclass"><strong>Листинг 11</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">AndGate</span><span class="p">(</span><span class="n">BinaryGate</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="n">BinaryGate</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">performGateLogic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPinA</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPinB</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">==</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">b</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Единственная вещь, которую необходимо добавить в <tt class="docutils literal"><span class="pre">AndGate</span></tt>, - это
специфическое поведение при выполнении булевых операций, которое мы описывали
выше. Это то место, где мы можем предоставить метод <tt class="docutils literal"><span class="pre">performGateLogic</span></tt>.
Для вентиля &#8220;И&#8221; он сначала должен получить два входных значения и вернуть 1,
если оба они равны единице. Полностью данный класс показан в
<a class="reference internal" href="#lst-andgateclass"><em>Листинге 11</em></a>.</p>
<p>Мы можем продемонстрировать работу класса <tt class="docutils literal"><span class="pre">AndGate`</span></tt>, создав его сущность
и попросив её вычислить её выходное значение. Следующий код показывает <tt class="docutils literal"><span class="pre">AndGate</span></tt>
объект <tt class="docutils literal"><span class="pre">g1</span></tt>, который имеет внутреннюю метку <tt class="docutils literal"><span class="pre">&quot;G1&quot;</span></tt>. Когда мы вызываем
метод <tt class="docutils literal"><span class="pre">getOutput</span></tt>, объект сначала должен вызвать свой метод <tt class="docutils literal"><span class="pre">performGateLogic</span></tt>,
который, в свою очередь, запрашивает значения из двух входных линий. После того,
как требуемые данные получены, показывается правильное выходное значение.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g1</span> <span class="o">=</span> <span class="n">AndGate</span><span class="p">(</span><span class="s">&quot;G1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g1</span><span class="o">.</span><span class="n">getOutput</span><span class="p">()</span>
<span class="go">Enter Pin A input for gate G1--&gt;1</span>
<span class="go">Enter Pin B input for gate G1--&gt;0</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Такая же работа должна быть проведена для элементов &#8220;ИЛИ&#8221; и &#8220;НЕ&#8221;. Класс
<tt class="docutils literal"><span class="pre">OrGate</span></tt> также будет субклассом <tt class="docutils literal"><span class="pre">BinaryGate</span></tt>, а класс <tt class="docutils literal"><span class="pre">NotGate</span></tt>
расширит <tt class="docutils literal"><span class="pre">UnaryGate</span></tt>. Оба они будут нуждаться в собственной реализации
функции <tt class="docutils literal"><span class="pre">performGateLogic</span></tt> со специфическим поведением.&lt;/p&gt;</p>
<p>Мы можем использовать единичный логический элемент, сконструировав в начале
экземпляр одного из классов вентилей и затем запросив его выходное значение
(что, в свою очередь, потребует предоставления входных данных). Например,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g2</span> <span class="o">=</span> <span class="n">OrGate</span><span class="p">(</span><span class="s">&quot;G2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g2</span><span class="o">.</span><span class="n">getOutput</span><span class="p">()</span>
<span class="go">Enter Pin A input for gate G2--&gt;1</span>
<span class="go">Enter Pin B input for gate G2--&gt;1</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g2</span><span class="o">.</span><span class="n">getOutput</span><span class="p">()</span>
<span class="go">Enter Pin A input for gate G2--&gt;0</span>
<span class="go">Enter Pin B input for gate G2--&gt;0</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g3</span> <span class="o">=</span> <span class="n">NotGate</span><span class="p">(</span><span class="s">&quot;G3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g3</span><span class="o">.</span><span class="n">getOutput</span><span class="p">()</span>
<span class="go">Enter Pin input for gate G3--&gt;0</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Теперь, когда у нас есть работающие базовые вентили, мы можем вернуться к
построению цепей. Чтобы создать цепь, нам необходимо соединить вентили вместе:
выход одного ко входу другого. Для мы реализуем новый класс под названием
<tt class="docutils literal"><span class="pre">Connector</span></tt>.</p>
<p>Класс <tt class="docutils literal"><span class="pre">Connector</span></tt> не будет принадлежать иерархии логических элементов.
Однако, он будет использовать её, поскольку каждый соединитель имеет два
вентиля - по одному на каждый конец (см. <a class="reference internal" href="#fig-connector"><em>Рисунок 12</em></a>).
Отношения такого рода очень важны в объектно-ориентированном программировании.
Они называются <strong>отношениями &#8220;HAS-A&#8221;</strong>. Напомним, что ранее мы использовали
словосочетание &#8220;IS-A отношение&#8221;, чтобы показать, как дочерний класс относится
к родительскому. Например, <tt class="docutils literal"><span class="pre">UnaryGate</span></tt> является (IS-A) <tt class="docutils literal"><span class="pre">LogicGate</span></tt>.</p>
<div class="figure align-center" id="fig-connector">
<img alt="../_images/connector.png" src="../_images/connector.png" />
<p class="caption">Рисунок 12: Connector соединяет выход одного вентиля со входом другого.</p>
</div>
<p>Теперь, для класса <tt class="docutils literal"><span class="pre">Connector</span></tt>, мы скажем, что он имеет <tt class="docutils literal"><span class="pre">LogicGate&lt;</span></tt>,
подразумевая, что соединители имеют внутри экземпляры <tt class="docutils literal"><span class="pre">LogicGate</span></tt>, но не
являются частью иерархии. При конструировании классов очень важно различать
те из них, которые имеют отношения &#8220;IS-A&#8221; (что требует наследования), и те,
которые обладают отношениями &#8220;HAS-A&#8221; (без наследования).</p>
<p><a class="reference internal" href="#lst-connectorclass"><em>Листинг 12</em></a> демонстрирует класс <tt class="docutils literal"><span class="pre">Connector</span></tt>.
Два экземпляра вентилей внутри каждого объекта соединителя будут обозначаться
как <tt class="docutils literal"><span class="pre">fromgate</span></tt> и <tt class="docutils literal"><span class="pre">topgate</span></tt>, различая таким образом, что данные будут &#8220;течь&#8221;
от выхода одного вентиля ко входу другого. Вызов <tt class="docutils literal"><span class="pre">setNextPin</span></tt> очень важен при
создании соединителей (см. <a class="reference internal" href="#lst-setpin"><em>Листинг 13</em></a>). Нам необходимо добавить
этот метод к нашим классам для вентилей таким образом, чтобы каждый <tt class="docutils literal"><span class="pre">togate</span></tt> мог
выбрать подходящую входную линию для соединения.</p>
<p id="lst-connectorclass"><strong>Листинг 12</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Connector</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fgate</span><span class="p">,</span> <span class="n">tgate</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fromgate</span> <span class="o">=</span> <span class="n">fgate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">togate</span> <span class="o">=</span> <span class="n">tgate</span>

        <span class="n">tgate</span><span class="o">.</span><span class="n">setNextPin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromgate</span>

    <span class="k">def</span> <span class="nf">getTo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">togate</span>
</pre></div>
</div>
<p>В классе <tt class="docutils literal"><span class="pre">BinaryGate</span></tt> для вентилей с двумя возможными входными линиями
коннектор должен присоединяться только к одной из них. Если доступны обе,
то по умолчанию мы будем выбирать <tt class="docutils literal"><span class="pre">pinA</span></tt>. Если он уже подсоединён к
чему-либо, то выберем <tt class="docutils literal"><span class="pre">pinB</span></tt>. Подсоединиться к вентилю, не имеющему
доступных входов, невозможно.</p>
<p id="lst-setpin"><strong>Listing 13</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">setNextPin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">source</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinA</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pinA</span> <span class="o">=</span> <span class="n">source</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinB</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pinB</span> <span class="o">=</span> <span class="n">source</span>
        <span class="k">else</span><span class="p">:</span>
           <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Error: NO EMPTY PINS&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Теперь можно получать входные данные двумя способами: извне, как раньше,
и с выхода вентиля, присоединённого ко входу данного. Это требование меняет
методы <tt class="docutils literal"><span class="pre">getPinA</span></tt> и <tt class="docutils literal"><span class="pre">getPinB</span></tt> (см. <a class="reference internal" href="#lst-newgetpin"><em>Листинг 14</em></a>).
Если входная линия ни к чему не подсоединена (<tt class="docutils literal"><span class="pre">None</span></tt>), то, как и раньше,
будет задаваться вопрос пользователю. Однако, если она связана, то
подключение осуществится, затребовав значение выхода <tt class="docutils literal"><span class="pre">fromgate</span></tt>. В свою
очередь, это запускает логическую обработку вентилем поступивших данных.
Процесс продолжается, пока есть доступные входы, и окончательное выходное
значение становится требуемым входом для вентиля в вопросе. В каком-то смысле,
схема работает в обратную сторону, чтобы найти входные данные, необходимые для
производства конечного результата.</p>
<p id="lst-newgetpin"><strong>Листинг 14</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">getPinA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinA</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Enter Pin A input for gate &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;--&gt;&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinA</span><span class="o">.</span><span class="n">getFrom</span><span class="p">()</span><span class="o">.</span><span class="n">getOutput</span><span class="p">()</span>
</pre></div>
</div>
<p>Следующий фрагмент конструирует схему, ранее показанную в этом разделе:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g1</span> <span class="o">=</span> <span class="n">AndGate</span><span class="p">(</span><span class="s">&quot;G1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g2</span> <span class="o">=</span> <span class="n">AndGate</span><span class="p">(</span><span class="s">&quot;G2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g3</span> <span class="o">=</span> <span class="n">OrGate</span><span class="p">(</span><span class="s">&quot;G3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g4</span> <span class="o">=</span> <span class="n">NotGate</span><span class="p">(</span><span class="s">&quot;G4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c1</span> <span class="o">=</span> <span class="n">Connector</span><span class="p">(</span><span class="n">g1</span><span class="p">,</span><span class="n">g3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c2</span> <span class="o">=</span> <span class="n">Connector</span><span class="p">(</span><span class="n">g2</span><span class="p">,</span><span class="n">g3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c3</span> <span class="o">=</span> <span class="n">Connector</span><span class="p">(</span><span class="n">g3</span><span class="p">,</span><span class="n">g4</span><span class="p">)</span>
</pre></div>
</div>
<p>Выходы двух вентилей &#8220;И&#8221; (<tt class="docutils literal"><span class="pre">g1</span></tt> и <tt class="docutils literal"><span class="pre">g2</span></tt>) соединены с вентилем &#8220;ИЛИ&#8221;
(<tt class="docutils literal"><span class="pre">g3</span></tt>), а его выход - с вентилем &#8220;НЕ&#8221; (<tt class="docutils literal"><span class="pre">g4</span></tt>). Выход вентиля &#8220;НЕ&#8221; -
это выход схемы целиком. Пример работы:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g4</span><span class="o">.</span><span class="n">getOutput</span><span class="p">()</span>
<span class="go">Pin A input for gate G1--&gt;0</span>
<span class="go">Pin B input for gate G1--&gt;1</span>
<span class="go">Pin A input for gate G2--&gt;1</span>
<span class="go">Pin B input for gate G2--&gt;1</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Попробуйте сами, используя ActiveCode 14.</p>

<div id="cont"></div>
<div id="complete_cuircuit" lang="python" class="ac_section alert alert-warning" >

<div class="ac_actions">
<button class='btn btn-success' id="complete_cuircuit_runb">Run</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="complete_cuircuit_saveb" onclick="saveEditor('complete_cuircuit');">Save</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="complete_cuircuit_loadb" onclick="requestCode('complete_cuircuit');">Load</button>

</div>
<br/>
<div id="complete_cuircuit_code_div" style="display: block" class="ac_code_div">
<textarea cols="50" rows="12" id="complete_cuircuit_code" class="active_code", prefixcode="undefined" lang="python">
class LogicGate:

    def __init__(self,n):
        self.name = n
        self.output = None

    def getName(self):
        return self.name

    def getOutput(self):
        self.output = self.performGateLogic()
        return self.output


class BinaryGate(LogicGate):

    def __init__(self,n):
        LogicGate.__init__(self,n)

        self.pinA = None
        self.pinB = None

    def getPinA(self):
        if self.pinA == None:
            return int(input("Enter Pin A input for gate "+self.getName()+"-->"))
        else:
            return self.pinA.getFrom().getOutput()

    def getPinB(self):
        if self.pinB == None:
            return int(input("Enter Pin B input for gate "+self.getName()+"-->"))
        else:
            return self.pinB.getFrom().getOutput()

    def setNextPin(self,source):
        if self.pinA == None:
            self.pinA = source
        else:
            if self.pinB == None:
                self.pinB = source
            else:
                print("Cannot Connect: NO EMPTY PINS on this gate")


class AndGate(BinaryGate):

    def __init__(self,n):
        BinaryGate.__init__(self,n)

    def performGateLogic(self):

        a = self.getPinA()
        b = self.getPinB()
        if a==1 and b==1:
            return 1
        else:
            return 0

class OrGate(BinaryGate):

    def __init__(self,n):
        BinaryGate.__init__(self,n)

    def performGateLogic(self):

        a = self.getPinA()
        b = self.getPinB()
        if a ==1 or b==1:
            return 1
        else:
            return 0

class UnaryGate(LogicGate):

    def __init__(self,n):
        LogicGate.__init__(self,n)

        self.pin = None

    def getPin(self):
        if self.pin == None:
            return int(input("Enter Pin input for gate "+self.getName()+"-->"))
        else:
            return self.pin.getFrom().getOutput()

    def setNextPin(self,source):
        if self.pin == None:
            self.pin = source
        else:
            print("Cannot Connect: NO EMPTY PINS on this gate")


class NotGate(UnaryGate):

    def __init__(self,n):
        UnaryGate.__init__(self,n)

    def performGateLogic(self):
        if self.getPin():
            return 0
        else:
            return 1


class Connector:

    def __init__(self, fgate, tgate):
        self.fromgate = fgate
        self.togate = tgate

        tgate.setNextPin(self)

    def getFrom(self):
        return self.fromgate

    def getTo(self):
        return self.togate


def main():
   g1 = AndGate("G1")
   g2 = AndGate("G2")
   g3 = OrGate("G3")
   g4 = NotGate("G4")
   c1 = Connector(g1,g3)
   c2 = Connector(g2,g3)
   c3 = Connector(g3,g4)
   print(g4.getOutput())

main()
</textarea>
</div>
<div class="ac_output">
<div style="text-align: center">
<canvas id="complete_cuircuit_canvas" class="ac-canvas" height="400" width="400" style="border-style: solid; display: none; text-align: center"></canvas>
</div>
<pre id="complete_cuircuit_suffix" style="display:none">
</pre><pre id="complete_cuircuit_pre" class="active_out">

</pre>

</div> 
<div class="clearfix"></div>
<p class="ac_caption"><span class="ac_caption_text">Законченная программа для построения цепей. (complete_cuircuit)</span> </p>

<script>
if ('block' == 'none') {
    // a hack to preserve the inline-block display style. Toggle() will use display: block
    // (instead of inline-block) if the previous display style was 'none'
    $('#complete_cuircuit_saveb').toggle();
    $('#complete_cuircuit_loadb').toggle();
}
if ($("#complete_cuircuit_code_div").parents(".admonition").length == 0 && $("#complete_cuircuit_code_div").parents("#exercises").length == 0){
	if ($(window).width() > 975){
		$("#complete_cuircuit_code_div").offset({
			left: $("#complete_cuircuit .clearfix").offset().left
		});
	}
	$("#complete_cuircuit_runb").one("click", function(){
		$({})
		.queue(function (next) {
			if ($(window).width() > 975){
				$("#complete_cuircuit_code_div").animate({
					left: 40
				}, 500, next);
			}
			else{
				next();
			}
		})
		.queue(function (next) {
			$("#complete_cuircuit_runb").parent().siblings(".ac_output").show();
			runit('complete_cuircuit',this, undefined);
			$("#complete_cuircuit_runb").on("click", function(){
				runit('complete_cuircuit',this, undefined);
			});
		})
		
	});
}
else{
	console.log("inside new if")
	$("#complete_cuircuit_code_div").css({float : "none", marginLeft : "auto", marginRight : "auto"});
	$("#complete_cuircuit_runb").parent().siblings(".ac_output").show().css({float : "none", right : "0px"});
	$("#complete_cuircuit_runb").on("click", function(){
		console.log("button clicked");
		runit('complete_cuircuit',this, undefined);
	});
}
</script>

</div>

<div class="admonition- admonition">
<p class="first admonition-title">Самопроверка</p>
<p>Создайте два новых класса вентилей: <tt class="docutils literal"><span class="pre">NorGate</span></tt> и <tt class="docutils literal"><span class="pre">NandGate</span></tt>. Первый работает подобно <tt class="docutils literal"><span class="pre">OrGate</span></tt>, к выходу которого подключено НЕ. Второй - как <tt class="docutils literal"><span class="pre">AndGate</span></tt> с НЕ на выходе.</p>
<p>Создайте ряд из вентилей, который доказывал бы, что NOT (( A and B) or (C and D)) это то же самое, что и NOT( A and B ) and NOT (C and D). Убедитесь, что используете в этой симуляции некоторые из вновь созданных вами вентилей.</p>

<div id="cont"></div>
<div id="self_check_5" lang="python" class="ac_section alert alert-warning" >

<div class="ac_actions">
<button class='btn btn-success' id="self_check_5_runb">Run</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="self_check_5_saveb" onclick="saveEditor('self_check_5');">Save</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="self_check_5_loadb" onclick="requestCode('self_check_5');">Load</button>

<span class="ac_sep"></span>
<button class='btn btn-default' id="self_check_5_showb" onclick="$('#self_check_5_code_div').toggle();cm_editors['self_check_5_code'].refresh();$('#self_check_5_saveb').toggle();$('#self_check_5_loadb').toggle()">Show/Hide Code</button>

<span class="ac_sep"></span>
<input type="button" class='btn btn-default ' id="gradeb" name="Show Feedback" value="Show Feedback" onclick="createGradeSummary('self_check_5')"/>

</div>
<br/>
<div id="self_check_5_code_div" style="display: none" class="ac_code_div">
<textarea cols="50" rows="12" id="self_check_5_code" class="active_code", prefixcode="undefined" lang="python">
class LogicGate:

    def __init__(self,n):
        self.name = n
        self.output = None

    def getName(self):
        return self.name

    def getOutput(self):
        self.output = self.performGateLogic()
        return self.output


class BinaryGate(LogicGate):

    def __init__(self,n):
        LogicGate.__init__(self,n)

        self.pinA = None
        self.pinB = None

    def getPinA(self):
        if self.pinA == None:
            return int(input("Enter Pin A input for gate "+self.getName()+"-->"))
        else:
            return self.pinA.getFrom().getOutput()

    def getPinB(self):
        if self.pinB == None:
            return int(input("Enter Pin B input for gate "+self.getName()+"-->"))
        else:
            return self.pinB.getFrom().getOutput()

    def setNextPin(self,source):
        if self.pinA == None:
            self.pinA = source
        else:
            if self.pinB == None:
                self.pinB = source
            else:
                print("Cannot Connect: NO EMPTY PINS on this gate")


class AndGate(BinaryGate):

    def __init__(self,n):
        BinaryGate.__init__(self,n)

    def performGateLogic(self):

        a = self.getPinA()
        b = self.getPinB()
        if a==1 and b==1:
            return 1
        else:
            return 0

class OrGate(BinaryGate):

    def __init__(self,n):
        BinaryGate.__init__(self,n)

    def performGateLogic(self):

        a = self.getPinA()
        b = self.getPinB()
        if a ==1 or b==1:
            return 1
        else:
            return 0

class UnaryGate(LogicGate):

    def __init__(self,n):
        LogicGate.__init__(self,n)

        self.pin = None

    def getPin(self):
        if self.pin == None:
            return int(input("Enter Pin input for gate "+self.getName()+"-->"))
        else:
            return self.pin.getFrom().getOutput()

    def setNextPin(self,source):
        if self.pin == None:
            self.pin = source
        else:
            print("Cannot Connect: NO EMPTY PINS on this gate")


class NotGate(UnaryGate):

    def __init__(self,n):
        UnaryGate.__init__(self,n)

    def performGateLogic(self):
        if self.getPin():
            return 0
        else:
            return 1


class Connector:

    def __init__(self, fgate, tgate):
        self.fromgate = fgate
        self.togate = tgate

        tgate.setNextPin(self)

    def getFrom(self):
        return self.fromgate

    def getTo(self):
        return self.togate



def main():
   g1 = AndGate("G1")

   print(g1.getOutput())

main()
</textarea>
</div>
<div class="ac_output">
<div style="text-align: center">
<canvas id="self_check_5_canvas" class="ac-canvas" height="400" width="400" style="border-style: solid; display: none; text-align: center"></canvas>
</div>
<pre id="self_check_5_suffix" style="display:none">
</pre><pre id="self_check_5_pre" class="active_out">

</pre>

</div> 
<div class="clearfix"></div>
<p class="ac_caption"><span class="ac_caption_text"> (self_check_5)</span> </p>

<script>
if ('none' == 'none') {
    // a hack to preserve the inline-block display style. Toggle() will use display: block
    // (instead of inline-block) if the previous display style was 'none'
    $('#self_check_5_saveb').toggle();
    $('#self_check_5_loadb').toggle();
}
if ($("#self_check_5_code_div").parents(".admonition").length == 0 && $("#self_check_5_code_div").parents("#exercises").length == 0){
	if ($(window).width() > 975){
		$("#self_check_5_code_div").offset({
			left: $("#self_check_5 .clearfix").offset().left
		});
	}
	$("#self_check_5_runb").one("click", function(){
		$({})
		.queue(function (next) {
			if ($(window).width() > 975){
				$("#self_check_5_code_div").animate({
					left: 40
				}, 500, next);
			}
			else{
				next();
			}
		})
		.queue(function (next) {
			$("#self_check_5_runb").parent().siblings(".ac_output").show();
			runit('self_check_5',this, undefined);
			$("#self_check_5_runb").on("click", function(){
				runit('self_check_5',this, undefined);
			});
		})
		
	});
}
else{
	console.log("inside new if")
	$("#self_check_5_code_div").css({float : "none", marginLeft : "auto", marginRight : "auto"});
	$("#self_check_5_runb").parent().siblings(".ac_output").show().css({float : "none", right : "0px"});
	$("#self_check_5_runb").on("click", function(){
		console.log("button clicked");
		runit('self_check_5',this, undefined);
	});
}
</script>

</div>

</div>
<div id="logicgates" class="video_popup" >
<video controls preload="none"  poster="../_static/videothumb.png">
    <source src="http://media.interactivepython.org/pythondsVideos/logicgates.mov" type="video/mp4"></source>
    <source src="http://media.interactivepython.org/pythondsVideos/logicgates.webm" type="video/webm"></source>
    No supported video types
</video>
</div>
<script>
   jQuery(function($) {
      $('#logicgates_thumb').click(function(e) {
         $('#logicgates').show();
         $('#logicgates_thumb').hide();
         logBookEvent({'event':'video','act':'play','div_id': 'logicgates'});
         // Log the run event
      });
	  $('#logicgates video').one("click", function(){
		this.play();
	  });
	  $('#logicgates video').one("play", function(){
		logBookEvent({'event':'video','act':'play','div_id': 'logicgates'});
	  });
   });
</script>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - Определение функций' data-toggle="tooltip">
    <a href="DefiningFunctions.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="DefiningFunctions.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - Заключение' data-toggle="tooltip" >
    <a href="Summary.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="Summary.html" >Next Section - Заключение</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <span id='numuserspan'></span> readers online now | <span class='loggedinuser'></span> | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013 Brad Miller, David Ranum.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.
    </p>
  </div>
</footer>

<script type="text/javascript" charset="utf-8">
    $(document).ready(addUserToFooter);
    $(document).ready(addNavbarLoginLink);
    $(document).ready(createEditors);
    $(document).ready(getNumUsers);
    $(document).ready(getOnlineUsers);
    $(document).ready(createScratchActivecode());
    $(document).ready(styleUnittestResults());
</script>

<script type="text/javascript">
  // add the video play button overlay image
  $(".video-play-overlay").each(function() {
    $(this).css('background-image', "url(\'../_static/play_overlay_icon.png\')")
    });

  // This function is needed to allow the dropdown search bar to work;
  // The default behaviour is that the dropdown menu closes when something in
  // it (like the search bar) is clicked
  $(function() {
    // Fix input element click problem
    $('.dropdown input, .dropdown label').click(function(e) {
      e.stopPropagation();
      });
  });

  // style codelens buttons (doing it here because PyTutor is a submodule owned by someone else
  $(function() {
    $(".ExecutionVisualizer").each(function() {
      $(this).find("#jmpFirstInstr").addClass('btn btn-default');
      $(this).find("#jmpStepBack").addClass('btn btn-danger');
      $(this).find("#jmpStepFwd").addClass('btn btn-success');
      $(this).find("#jmpLastInstr").addClass('btn btn-default');
      });
  });

</script>


<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>