<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Реализация упорядоченного списка &mdash; Problem Solving with Algorithms and Data Structures</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/video.css" type="text/css" />
    <link rel="stylesheet" href="../_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/js/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/js/pytutor.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/assess.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/underscore-min.js"></script>
    <script type="text/javascript" src="../_static/lib/lis.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/parsons-noconflict.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <link rel="top" title="Problem Solving with Algorithms and Data Structures" href="../index.html" />
    <link rel="next" title="Заключение" href="Summary.html" />
    <link rel="prev" title="Абстрактный тип данных “упорядоченный список”" href="TheOrderedListAbstractDataType.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'pythonds';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false
  eBookConfig.build_info = "2.1.5";
  eBookConfig.isLoggedIn = false;
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>


<script>
var _prum = [['id', '521dfcc4abe53d0749000000'],
             ['mark', 'firstbyte', (new Date()).getTime()]];
(function() {
    var s = document.getElementsByTagName('script')[0]
      , p = document.createElement('script');
    p.async = 'async';
    p.src = '//rum-static.pingdom.net/prum.min.js';
    s.parentNode.insertBefore(p, s);
})();
</script>



  </head>
  <body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="../index.html">Problem Solving with Algorithms and Data Structures</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div class="gittip">
                  <iframe style="border:0;"
                    src="https://www.gittip.com/bnmnetp/widget.html"
                    width="48pt" height="22pt" class="gittip-button">
                  </iframe>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/pythonds/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='http://127.0.0.1:8000/runestone/admin/index'>Instructor's Page</a></li>
            <li class="divider"></li>
            <li><a href="http://127.0.0.1:8000/runestone/default/user/profile" id="profilelink">Edit Profile</a></li>
            <li><a href="http://127.0.0.1:8000/runestone/default/user/change_password" id="passwordlink">Change Password</a></li>
            <li><a href="http://127.0.0.1:8000/runestone/default/user/register" id="registerlink">Register</a></li>
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
          </ul>
        </li>
        <!-- end user account dropdown -->

        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/pythonds/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='https://github.com/bnmnetp/runestone/issues/new'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Реализация упорядоченного списка</a><ul>
<li><a class="reference internal" href="#id2">Анализ связанных списков</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - Абстрактный тип данных &#8220;упорядоченный список&#8221;" data-toggle="tooltip">
    <a href="TheOrderedListAbstractDataType.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - Заключение' data-toggle="tooltip" >
    <a href="Summary.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="id1">
<h1>Реализация упорядоченного списка<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Перед тем, как начать реализовывать упорядоченный список, мы должны
вспомнить, что положение элементов относительно друг друга основываются
на некой базовой характеристике. Упорядоченный список целых чисел,
представленный выше (17, 26, 31, 77 и 93), может быть выражен связанной
структурой, показанной на <a class="reference internal" href="#fig-orderlinked"><em>Рисунке 15</em></a>.
Опять же, узел и ссылка идеально подходят для представления
взаимного расположения элементов.</p>
<div class="figure align-center" id="fig-orderlinked">
<img alt="../_images/orderlinkedlist.png" src="../_images/orderlinkedlist.png" />
<p class="caption">Рисунок 15: Упорядоченный связанный список</p>
</div>
<p>Для реализации класса <tt class="docutils literal"><span class="pre">OrderedList</span></tt> мы будем использовать ту же технику,
что и для неупорядоченного списка. Пустой список вновь будет обозначаться
ссылкой <tt class="docutils literal"><span class="pre">head</span></tt> на <tt class="docutils literal"><span class="pre">None</span></tt> (см. <a class="reference internal" href="#lst-orderlist"><em>Листинг 8</em></a>).</p>
<p id="lst-orderlist"><strong>Листинг 8</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">OrderedList</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>
</div>
<p>Рассматривая операции для упорядоченного списка, стоит отметить, что методы
<tt class="docutils literal"><span class="pre">isEmpty</span></tt> и <tt class="docutils literal"><span class="pre">size</span></tt> могут быть реализованы аналогично неупорядоченному
списку, поскольку имеют дело только с количеством узлов безотносительно их
содержимого. Также хорошо будет работать метод <tt class="docutils literal"><span class="pre">remove</span></tt>, потому что нам
по-прежнему надо искать элемент, а затем окружающие узел ссылки, чтобы
удалить его. Два оставшихся метода - <tt class="docutils literal"><span class="pre">search</span></tt> и <tt class="docutils literal"><span class="pre">add</span></tt> - потребуют
некоторой модификации.</p>
<p>Поиск в неупорядоченном списке требует, чтобы мы обходили узлы по одному
за раз, пока не найдём искомый элемент или не выйдем за пределы списка
(<tt class="docutils literal"><span class="pre">None</span></tt>). Такой подход будет работать и для упорядоченного списка. В
том случае, когда элемент найдётся, - он будет тем, что нам нужен. Однако,
в случае, когда элемент не содержится в списке, мы можем воспользоваться
преимуществом упорядочения, чтобы остановить поиск как можно раньше.</p>
<p>Например, <a class="reference internal" href="#fig-stopearly"><em>Рисунок 16</em></a> показывает упорядоченный связанный
список, в котором ищется значение 45. В процессе обхода мы начинаем с головы
списка и сначала проверяем на соответствие 17. Поскольку 17 - не то, что мы
ищем, то смещаемся к следующему узлу - 26. Это снова не то, и мы перемещаемся
к 31, а затем к 54. В этот момент кое-что изменилось. Поскольку 54 не тот элемент,
что мы ищем, наша предыдущая стратегия должна заключаться в продвижении вперёд.
Однако, с учётом того факта, что список упорядочен, в этом больше нет необходимости.
Раз значение в узле больше, чем искомое, значит поиск можно останавливать и возвращать
<tt class="docutils literal"><span class="pre">False</span></tt>. Не существует способа значению оказаться среди остатка упорядоченного списка.</p>
<div class="figure align-center" id="fig-stopearly">
<img alt="../_images/orderedsearch.png" src="../_images/orderedsearch.png" />
<p class="caption">Рисунок 16: Поиск в упорядоченном списке</p>
</div>
<p><a class="reference internal" href="#lst-ordersearch"><em>Листинг 9</em></a> показывает законченный метод <tt class="docutils literal"><span class="pre">search</span></tt>.
Новое условие, обсуждаемое выше, можно вставить очень легко: добавить ещё
одну булеву переменную - <tt class="docutils literal"><span class="pre">stop</span></tt> - и инициализировать её <tt class="docutils literal"><span class="pre">False</span></tt> (строка 4).
Пока <tt class="docutils literal"><span class="pre">stop</span></tt> равно <tt class="docutils literal"><span class="pre">`False`</span></tt> мы можем продолжать поиск в списке (строка 5).
Если в любом из узлов обнаружится значение больше искомого, то мы установим
<tt class="docutils literal"><span class="pre">stop</span></tt> в <tt class="docutils literal"><span class="pre">True</span></tt> (строки 9-10). Оставшиеся строки идентичны поиску в
неупорядоченном списке.</p>
<p id="lst-ordersearch"><strong>Листинг 9</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>
    <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
    <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">stop</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">while</span> <span class="n">current</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
            <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">item</span><span class="p">:</span>
                <span class="n">stop</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">found</span>
</pre></div>
</div>
<p>Наиболее значительная модификация затронет метод <tt class="docutils literal"><span class="pre">add</span></tt>. Напомним, что
в неупорядоченных списках он просто помещал новый элемент в голову списка -
самую доступную точку. К сожалению, с упорядоченным списком это больше не
сработает. Теперь нам надо искать специальное место, где будет размещаться
новый элемент среди уже существующих в упорядоченном списке.</p>
<p>Предположим, что у нас есть упорядоченный список из 17, 26, 54, 77 и 93,
и мы хотим добавить в него значение 31. Метод <tt class="docutils literal"><span class="pre">add</span></tt> должен решить, что
новый элемент следует расположить между 26 и 54. <a class="reference internal" href="#fig-orderinsert"><em>Рисунок 17</em></a>
показывает необходимую вставку. Как мы объясняли ранее, нам нужно обойти
связанный список в поисках места, куда будет вставлен новый элемент.
Мы знаем, что место найдено, если мы или вышли за пределы списка (<tt class="docutils literal"><span class="pre">current</span></tt>
равно <tt class="docutils literal"><span class="pre">None</span></tt>), или значение текущего узла стало больше, чем добавляемый элемент.
В нашем примере нас вынудит остановится появление значения 54.</p>
<div class="figure align-center" id="fig-orderinsert">
<img alt="../_images/linkedlistinsert.png" src="../_images/linkedlistinsert.png" />
<p class="caption">Рисунок 17: Добавление элемента в упорядоченный связанный список</p>
</div>
<p>Как мы уже видели для неупорядоченных списков, здесь понадобится дополнительная
ссылка (<tt class="docutils literal"><span class="pre">previous</span></tt>), поскольку <tt class="docutils literal"><span class="pre">current</span></tt> не сможет предоставить доступ к
узлу, который нужно будет изменить. <a class="reference internal" href="#lst-orderadd"><em>Листинг 10</em></a> показывает
законченный метод <tt class="docutils literal"><span class="pre">add</span></tt>. Строки 2-3 устанавливают две внешние ссылки, а строки
9-10 вновь позволяют <tt class="docutils literal"><span class="pre">previous</span></tt> следовать на один узел после <tt class="docutils literal"><span class="pre">current</span></tt> во
время каждой итерации. Условие в строке 5 разрешает итерациям продолжаться до
тех пор, пока остаются непросмотренные узлы и значение текущего не превышает
искомое. Противный случай - когда итерация терпит неудачу - означает, что мы
нашли место для нового узла.</p>
<p>Остаток метода завершает двухшаговый процесс, показанный на
<a class="reference internal" href="#fig-orderinsert"><em>Рисунке 17</em></a>. Поскольку для элемента был создан новый узел,
то остаётся единственный вопрос: куда он будет добавлен - в начало или в середину
связанного списка? Для ответа на него вновь используется <tt class="docutils literal"><span class="pre">previous</span> <span class="pre">==</span> <span class="pre">None</span></tt>.</p>
<p id="lst-orderadd"><strong>Листинг 10</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>
    <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
    <span class="n">previous</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">stop</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">while</span> <span class="n">current</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">item</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">previous</span> <span class="o">=</span> <span class="n">current</span>
            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>

    <span class="n">temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">previous</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">temp</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
        <span class="n">previous</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
</pre></div>
</div>
<p>Класс <tt class="docutils literal"><span class="pre">`OrderedList`</span></tt> с реализованными на данный момент методами можно
найти в ActiveCode 4.</p>
<p>Оставшиеся операции мы оставляем в качестве упражнения.
Вам следует внимательно рассмотреть, когда неупорядоченная реализация будет
работать как следует с учётом того, что теперь список упорядочен.</p>

<div id="cont"></div>
<div id="orderedlistclass" lang="python" class="ac_section alert alert-warning" >

<div class="ac_actions">
<button class='btn btn-success' id="orderedlistclass_runb">Run</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="orderedlistclass_saveb" onclick="saveEditor('orderedlistclass');">Save</button>
<button class="ac_opt btn btn-default" style="display: inline-block" id="orderedlistclass_loadb" onclick="requestCode('orderedlistclass');">Load</button>

<span class="ac_sep"></span>
<button class='btn btn-default' id="orderedlistclass_showb" onclick="$('#orderedlistclass_code_div').toggle();cm_editors['orderedlistclass_code'].refresh();$('#orderedlistclass_saveb').toggle();$('#orderedlistclass_loadb').toggle()">Show/Hide Code</button>

</div>
<br/>
<div id="orderedlistclass_code_div" style="display: none" class="ac_code_div">
<textarea cols="50" rows="12" id="orderedlistclass_code" class="active_code", prefixcode="undefined" lang="python">
class Node:
    def __init__(self,initdata):
        self.data = initdata
        self.next = None

    def getData(self):
        return self.data

    def getNext(self):
        return self.next

    def setData(self,newdata):
        self.data = newdata

    def setNext(self,newnext):
        self.next = newnext


class OrderedList:
    def __init__(self):
        self.head = None

    def search(self,item):
        current = self.head
        found = False
        stop = False
        while current != None and not found and not stop:
            if current.getData() == item:
                found = True
            else:
                if current.getData() > item:
                    stop = True
                else:
                    current = current.getNext()

        return found

    def add(self,item):
        current = self.head
        previous = None
        stop = False
        while current != None and not stop:
            if current.getData() > item:
                stop = True
            else:
                previous = current
                current = current.getNext()

        temp = Node(item)
        if previous == None:
            temp.setNext(self.head)
            self.head = temp
        else:
            temp.setNext(current)
            previous.setNext(temp)

    def isEmpty(self):
        return self.head == None

    def size(self):
        current = self.head
        count = 0
        while current != None:
            count = count + 1
            current = current.getNext()

        return count


mylist = OrderedList()
mylist.add(31)
mylist.add(77)
mylist.add(17)
mylist.add(93)
mylist.add(26)
mylist.add(54)

print(mylist.size())
print(mylist.search(93))
print(mylist.search(100))
</textarea>
</div>
<div class="ac_output">
<div style="text-align: center">
<canvas id="orderedlistclass_canvas" class="ac-canvas" height="400" width="400" style="border-style: solid; display: none; text-align: center"></canvas>
</div>
<pre id="orderedlistclass_suffix" style="display:none">
</pre><pre id="orderedlistclass_pre" class="active_out">

</pre>

</div> 
<div class="clearfix"></div>
<p class="ac_caption"><span class="ac_caption_text">OrderedList класс на данный момент (orderedlistclass)</span> </p>

<script>
if ('none' == 'none') {
    // a hack to preserve the inline-block display style. Toggle() will use display: block
    // (instead of inline-block) if the previous display style was 'none'
    $('#orderedlistclass_saveb').toggle();
    $('#orderedlistclass_loadb').toggle();
}
if ($("#orderedlistclass_code_div").parents(".admonition").length == 0 && $("#orderedlistclass_code_div").parents("#exercises").length == 0){
	if ($(window).width() > 975){
		$("#orderedlistclass_code_div").offset({
			left: $("#orderedlistclass .clearfix").offset().left
		});
	}
	$("#orderedlistclass_runb").one("click", function(){
		$({})
		.queue(function (next) {
			if ($(window).width() > 975){
				$("#orderedlistclass_code_div").animate({
					left: 40
				}, 500, next);
			}
			else{
				next();
			}
		})
		.queue(function (next) {
			$("#orderedlistclass_runb").parent().siblings(".ac_output").show();
			runit('orderedlistclass',this, undefined);
			$("#orderedlistclass_runb").on("click", function(){
				runit('orderedlistclass',this, undefined);
			});
		})
		
	});
}
else{
	console.log("inside new if")
	$("#orderedlistclass_code_div").css({float : "none", marginLeft : "auto", marginRight : "auto"});
	$("#orderedlistclass_runb").parent().siblings(".ac_output").show().css({float : "none", right : "0px"});
	$("#orderedlistclass_runb").on("click", function(){
		console.log("button clicked");
		runit('orderedlistclass',this, undefined);
	});
}
</script>

</div>

<div class="section" id="id2">
<h2>Анализ связанных списков<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Чтобы проанализировать сложность операций для связанных списков, нам нужно
выяснить, требуют ли они обход. Рассмотрим связанный список из <em>n</em> узлов
Метод <tt class="docutils literal"><span class="pre">isEmpty</span></tt> имеет <span class="math">\(O(1)\)</span>, поскольку нужен всего один шаг, чтобы
проверить, ссылается ли <tt class="docutils literal"><span class="pre">head</span></tt> на <tt class="docutils literal"><span class="pre">None</span></tt>. С другой стороны, <tt class="docutils literal"><span class="pre">size</span></tt>
всегда требует <em>n</em> шагов, поскольку не существует способа узнать количество
узлов в связанном списке, не обойдя его от головы до конца. Таким образом,
<tt class="docutils literal"><span class="pre">size</span></tt> имеет <span class="math">\(O(n)\)</span>. Добавление элемента в неупорядоченный список
всегда будет <span class="math">\(O(1)\)</span>, ведь мы просто помещаем новый узел в голову
связанного списка. Однако, <tt class="docutils literal"><span class="pre">search</span></tt> и <tt class="docutils literal"><span class="pre">remove</span></tt>, а так же <tt class="docutils literal"><span class="pre">add</span></tt> для
упорядоченных списков, требуют процесса обхода. Хотя в среднем им потребуется
обойти только половину списка, все они имеют <span class="math">\(O(n)\)</span> - исходя из наихудшего
случая с обработкой каждого узла в списке.</p>
<p>Вы также можете заметить, что представление этой реализации отличается от
существующей, даваемой раньше для списков Python. Это предполагает, что там
списки основываются не на связанной модели, а на чём-то ещё. Действительно,
в основе существующей реализация списков в Python лежит понятие массива.
Мы обсудим это более детально в другой главе.</p>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - Абстрактный тип данных &#8220;упорядоченный список&#8221;' data-toggle="tooltip">
    <a href="TheOrderedListAbstractDataType.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="TheOrderedListAbstractDataType.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - Заключение' data-toggle="tooltip" >
    <a href="Summary.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="Summary.html" >Next Section - Заключение</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <span id='numuserspan'></span> readers online now | <span class='loggedinuser'></span> | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013 Brad Miller, David Ranum.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.
    </p>
  </div>
</footer>

<script type="text/javascript" charset="utf-8">
    $(document).ready(addUserToFooter);
    $(document).ready(addNavbarLoginLink);
    $(document).ready(createEditors);
    $(document).ready(getNumUsers);
    $(document).ready(getOnlineUsers);
    $(document).ready(createScratchActivecode());
    $(document).ready(styleUnittestResults());
</script>

<script type="text/javascript">
  // add the video play button overlay image
  $(".video-play-overlay").each(function() {
    $(this).css('background-image', "url(\'../_static/play_overlay_icon.png\')")
    });

  // This function is needed to allow the dropdown search bar to work;
  // The default behaviour is that the dropdown menu closes when something in
  // it (like the search bar) is clicked
  $(function() {
    // Fix input element click problem
    $('.dropdown input, .dropdown label').click(function(e) {
      e.stopPropagation();
      });
  });

  // style codelens buttons (doing it here because PyTutor is a submodule owned by someone else
  $(function() {
    $(".ExecutionVisualizer").each(function() {
      $(this).find("#jmpFirstInstr").addClass('btn btn-default');
      $(this).find("#jmpStepBack").addClass('btn btn-danger');
      $(this).find("#jmpStepFwd").addClass('btn btn-success');
      $(this).find("#jmpLastInstr").addClass('btn btn-default');
      });
  });

</script>


<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>